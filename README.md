# SQL Salt 
 _SQL Server Database Administration Code and Helpful Scripts_ 

***
## AdminMisc  
### DAC  
[`AdminMisc_DAC_ConnectToDAC.txt`](https://github.com/trstringer/SQLSalt/blob/master/AdminMisc/DAC/AdminMisc_DAC_ConnectToDAC.txt)  
[`AdminMisc_DAC_EnableRemoteDAC.sql`](https://github.com/trstringer/SQLSalt/blob/master/AdminMisc/DAC/AdminMisc_DAC_EnableRemoteDAC.sql)  
[`AdminMisc_DAC_GetDACPort.sql`](https://github.com/trstringer/SQLSalt/blob/master/AdminMisc/DAC/AdminMisc_DAC_GetDACPort.sql)  
### Misc  
[`AdminMisc_Misc_ConnectToLockedOutInstance.txt`](https://github.com/trstringer/SQLSalt/blob/master/AdminMisc/Misc/AdminMisc_Misc_ConnectToLockedOutInstance.txt)  
[`AdminMisc_Misc_ReadErrorLogToTempTable.sql`](https://github.com/trstringer/SQLSalt/blob/master/AdminMisc/Misc/AdminMisc_Misc_ReadErrorLogToTempTable.sql)  
## CentralManagementServers  
### ServerGroups  
[`CMS_ServerGroups_CreateNewServerGroup.sql`](https://github.com/trstringer/SQLSalt/blob/master/CentralManagementServers/ServerGroups/CMS_ServerGroups_CreateNewServerGroup.sql)  
### Servers  
[`CMS_Servers_RegisterServer.sql`](https://github.com/trstringer/SQLSalt/blob/master/CentralManagementServers/Servers/CMS_Servers_RegisterServer.sql)  
## Database  
### Accessibility  
[`Database_Accessibility_MultiUserSingleUserRestrictedUser.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Accessibility/Database_Accessibility_MultiUserSingleUserRestrictedUser.sql)  
[`Database_Accessibility_OnlineOfflineEmergency.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Accessibility/Database_Accessibility_OnlineOfflineEmergency.sql)  
[`Database_Accessibility_ReadOnlyReadWrite.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Accessibility/Database_Accessibility_ReadOnlyReadWrite.sql)  
[`Database_Accessibility_StateForAllDBs.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Accessibility/Database_Accessibility_StateForAllDBs.sql)  
### Objects  
[`Database_Objects_ChangeOwnership.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Objects/Database_Objects_ChangeOwnership.sql)  
[`Database_Objects_CreateTableVar.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Objects/Database_Objects_CreateTableVar.sql)  
[`Database_Objects_CreateTempTable.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Objects/Database_Objects_CreateTempTable.sql)  
[`Database_Objects_GetObjectOwnership.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Objects/Database_Objects_GetObjectOwnership.sql)  
[`Database_Objects_GetPartitionDetails.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Objects/Database_Objects_GetPartitionDetails.sql)  
[`Database_Objects_SparseColumnCreate.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Objects/Database_Objects_SparseColumnCreate.sql)  
### Storage  
[`Database_Storage_DbFileSpaceUsageStats.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Storage/Database_Storage_DbFileSpaceUsageStats.sql)  
[`TableSpace_GetSpaceAndPagesByUserTable.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Storage/TableSpace_GetSpaceAndPagesByUserTable.sql)  
[`TableSpace_GetSpaceAndPagesForAllUserTables.sql`](https://github.com/trstringer/SQLSalt/blob/master/Database/Storage/TableSpace_GetSpaceAndPagesForAllUserTables.sql)  
## DBMail  
### Setup  
[`DBMail_Setup_GmailForDBMail.txt`](https://github.com/trstringer/SQLSalt/blob/master/DBMail/Setup/DBMail_Setup_GmailForDBMail.txt)  
## DML  
### Delete  
[`DML_Delete_DeleteLargeDataByBatches.sql`](https://github.com/trstringer/SQLSalt/blob/master/DML/Delete/DML_Delete_DeleteLargeDataByBatches.sql)  
## Indexes  
### Heaps  
[`Indexes_Heaps_GetAllHeapsForDb.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Heaps/Indexes_Heaps_GetAllHeapsForDb.sql)  
### Physical  
[`Indexes_GetIndexesByTable.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Physical/Indexes_GetIndexesByTable.sql)  
[`Indexes_Physical_GetFragmentationBasedOnPageCount.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Physical/Indexes_Physical_GetFragmentationBasedOnPageCount.sql)  
[`Indexes_Physical_GetRowsAndSpacePerIndex.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Physical/Indexes_Physical_GetRowsAndSpacePerIndex.sql)  
[`Indexes_Physical_IndexFragmentationSummary.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Physical/Indexes_Physical_IndexFragmentationSummary.sql)  
[`Indexes_Physical_RebuildReorganize.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Physical/Indexes_Physical_RebuildReorganize.sql)  
[`Indexes_Structure_GetIndexedColsForAllTables.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Physical/Indexes_Structure_GetIndexedColsForAllTables.sql)  
[`IndexFragmentationThreshold.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Physical/IndexFragmentationThreshold.sql)  
### Usage  
[`Indexes_Usage_GetIndexUsageStats.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Usage/Indexes_Usage_GetIndexUsageStats.sql)  
[`Indexes_Usage_GetUnusedIndexes.sql`](https://github.com/trstringer/SQLSalt/blob/master/Indexes/Usage/Indexes_Usage_GetUnusedIndexes.sql)  
## Instance  
### Connectivity  
[`Instance_Connectivity_CurrentConnectionInfoWithSqlText.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Connectivity/Instance_Connectivity_CurrentConnectionInfoWithSqlText.sql)  
### Databases  
[`Instance_Databases_GetLogFileConsumptionForAllDBs.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Databases/Instance_Databases_GetLogFileConsumptionForAllDBs.sql)  
[`RecoveryModel_GetNonFullRecoveryModelDBs.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Databases/RecoveryModel_GetNonFullRecoveryModelDBs.sql)  
### GeneralConfig  
[`Instance_GeneralConfig_GetMaxErrorLogCount.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/GeneralConfig/Instance_GeneralConfig_GetMaxErrorLogCount.sql)  
[`Instance_GeneralConfig_ServiceAccounts.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/GeneralConfig/Instance_GeneralConfig_ServiceAccounts.sql)  
### LocksLatches  
[`Instance_Locks_DeadlockInfoToErrorLog.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/LocksLatches/Instance_Locks_DeadlockInfoToErrorLog.sql)  
[`Instance_Locks_InstanceLocksSummary.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/LocksLatches/Instance_Locks_InstanceLocksSummary.sql)  
[`Instance_Locks_LockEscalationDisable.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/LocksLatches/Instance_Locks_LockEscalationDisable.sql)  
### Storage  
[`BufferPool_DataCache_TotalSizeOfDataPages.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Storage/BufferPool_DataCache_TotalSizeOfDataPages.sql)  
[`BufferPool_PlanCache_ClearAdHocPlans.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Storage/BufferPool_PlanCache_ClearAdHocPlans.sql)  
[`BufferPool_PlanCache_ClearCache.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Storage/BufferPool_PlanCache_ClearCache.sql)  
[`BufferPool_PlanCache_CountsByObjType.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Storage/BufferPool_PlanCache_CountsByObjType.sql)  
[`BufferPool_PlanCache_RecompileProc.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Storage/BufferPool_PlanCache_RecompileProc.sql)  
[`BufferPool_PlanCache_StoredProcsForDB.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Storage/BufferPool_PlanCache_StoredProcsForDB.sql)  
[`BufferPool_PlanCache_StoredProcsLastCompiled.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Storage/BufferPool_PlanCache_StoredProcsLastCompiled.sql)  
[`BufferPool_Storage_PlanCacheDataCacheSizeByDB.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Storage/BufferPool_Storage_PlanCacheDataCacheSizeByDB.sql)  
### Waits  
[`Instance_Waits_BenignWaits_Pre2012.txt`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Waits/Instance_Waits_BenignWaits_Pre2012.txt)  
[`Instance_Waits_CurrentBlockedRequests.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Waits/Instance_Waits_CurrentBlockedRequests.sql)  
[`Instance_Waits_CurrentUserWaits.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Waits/Instance_Waits_CurrentUserWaits.sql)  
[`WaitStatsExplained_1_CreateTable.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Waits/WaitStatsExplained_1_CreateTable.sql)  
[`WaitStatsExplained_2_CreateProc.sql`](https://github.com/trstringer/SQLSalt/blob/master/Instance/Waits/WaitStatsExplained_2_CreateProc.sql)  
## IO  
### Performance  
[`IO_Performance_DatabaseFilesStallDurationsBytesReadWritten.sql`](https://github.com/trstringer/SQLSalt/blob/master/IO/Performance/IO_Performance_DatabaseFilesStallDurationsBytesReadWritten.sql)  
## PBM  
### Conditions  
[`PBM_Conditions_GetUserCreatedConditions.sql`](https://github.com/trstringer/SQLSalt/blob/master/PBM/Conditions/PBM_Conditions_GetUserCreatedConditions.sql)  
### Facets  
[`PBM_Facets_PossibleEvaluationModesPerFacet.sql`](https://github.com/trstringer/SQLSalt/blob/master/PBM/Facets/PBM_Facets_PossibleEvaluationModesPerFacet.sql)  
### UsefulPolicies  
[`PBM_UsefulPolicies_AutoCloseOff.sql`](https://github.com/trstringer/SQLSalt/blob/master/PBM/UsefulPolicies/PBM_UsefulPolicies_AutoCloseOff.sql)  
## PowerShell  
### EventLog  
[`PowerShell_EventLog_GetSQLErrors.ps1`](https://github.com/trstringer/SQLSalt/blob/master/PowerShell/EventLog/PowerShell_EventLog_GetSQLErrors.ps1)  
### Modules  
[`PowerShell_Modules_GetAvailableModules.ps1`](https://github.com/trstringer/SQLSalt/blob/master/PowerShell/Modules/PowerShell_Modules_GetAvailableModules.ps1)  
### PerfMonStarter  
[`PerfMonStarter.ps1`](https://github.com/trstringer/SQLSalt/blob/master/PowerShell/PerfMonStarter/PerfMonStarter.ps1)  
### Services  
[`PowerShell_Services_GetNonAutomaticSQLServices.ps1`](https://github.com/trstringer/SQLSalt/blob/master/PowerShell/Services/PowerShell_Services_GetNonAutomaticSQLServices.ps1)  
[`PowerShell_Services_GetStoppedSQLServices.ps1`](https://github.com/trstringer/SQLSalt/blob/master/PowerShell/Services/PowerShell_Services_GetStoppedSQLServices.ps1)  
## Recoverability  
### AttachDetach  
[`Recoverability_AttachDetach_AttachDbWithNoLogFile.sql`](https://github.com/trstringer/SQLSalt/blob/master/Recoverability/AttachDetach/Recoverability_AttachDetach_AttachDbWithNoLogFile.sql)  
### BackupRestore  
[`BackupRestore_TestBackupDatabaseFromBackupFile.sql`](https://github.com/trstringer/SQLSalt/blob/master/Recoverability/BackupRestore/BackupRestore_TestBackupDatabaseFromBackupFile.sql)  
[`Recoverability_BackupRestore_BackupDatabase.sql`](https://github.com/trstringer/SQLSalt/blob/master/Recoverability/BackupRestore/Recoverability_BackupRestore_BackupDatabase.sql)  
[`Recoverability_BackupRestore_RestoreDatabase.sql`](https://github.com/trstringer/SQLSalt/blob/master/Recoverability/BackupRestore/Recoverability_BackupRestore_RestoreDatabase.sql)  
### Corruption  
[`Recoverability_Corruption_CorruptCI_FOR_TESTING_ONLY.sql`](https://github.com/trstringer/SQLSalt/blob/master/Recoverability/Corruption/Recoverability_Corruption_CorruptCI_FOR_TESTING_ONLY.sql)  
[`Recoverability_Corruption_CorruptNCI_FOR_TESTING_ONLY.sql`](https://github.com/trstringer/SQLSalt/blob/master/Recoverability/Corruption/Recoverability_Corruption_CorruptNCI_FOR_TESTING_ONLY.sql)  
### Snapshots  
[`Recoverability_Snapshots_CreateSnapshot.sql`](https://github.com/trstringer/SQLSalt/blob/master/Recoverability/Snapshots/Recoverability_Snapshots_CreateSnapshot.sql)  
[`Recoverability_Snapshots_RevertToSnapshot.sql`](https://github.com/trstringer/SQLSalt/blob/master/Recoverability/Snapshots/Recoverability_Snapshots_RevertToSnapshot.sql)  
## RI  
### FK  
[`RI_FK_GetFkReferences.sql`](https://github.com/trstringer/SQLSalt/blob/master/RI/FK/RI_FK_GetFkReferences.sql)  
## Security  
### Certificates  
[`Security_Certificates_CreateCertEncryptWithPassword.sql`](https://github.com/trstringer/SQLSalt/blob/master/Security/Certificates/Security_Certificates_CreateCertEncryptWithPassword.sql)  
### Principals  
[`Security_Principals_CreateLoginlessUser.sql`](https://github.com/trstringer/SQLSalt/blob/master/Security/Principals/Security_Principals_CreateLoginlessUser.sql)  
[`Security_Principals_DatabaseAddRoleMember_2012.sql`](https://github.com/trstringer/SQLSalt/blob/master/Security/Principals/Security_Principals_DatabaseAddRoleMember_2012.sql)  
[`Security_Principals_DatabaseAddRoleMember_Pre2012.sql`](https://github.com/trstringer/SQLSalt/blob/master/Security/Principals/Security_Principals_DatabaseAddRoleMember_Pre2012.sql)  
[`Security_Principals_GetInstanceLogins.sql`](https://github.com/trstringer/SQLSalt/blob/master/Security/Principals/Security_Principals_GetInstanceLogins.sql)  
### Triggers  
[`LogonTrigger_1_CreateLoginAdmissionTable.sql`](https://github.com/trstringer/SQLSalt/blob/master/Security/Triggers/LogonTrigger_1_CreateLoginAdmissionTable.sql)  
[`LogonTrigger_2_CreateAddLoginPermittedTimeStoredProcedure.sql`](https://github.com/trstringer/SQLSalt/blob/master/Security/Triggers/LogonTrigger_2_CreateAddLoginPermittedTimeStoredProcedure.sql)  
[`LogonTrigger_3_CreateLogonTrigger.sql`](https://github.com/trstringer/SQLSalt/blob/master/Security/Triggers/LogonTrigger_3_CreateLogonTrigger.sql)  
## SQLServerAgent  
### Alerts  
[`SQLServerAgent_Alerts_CreateAlertsSeverError.sql`](https://github.com/trstringer/SQLSalt/blob/master/SQLServerAgent/Alerts/SQLServerAgent_Alerts_CreateAlertsSeverError.sql)  
[`SQLServerAgent_Alerts_GetRecentTriggeredAlerts.sql`](https://github.com/trstringer/SQLSalt/blob/master/SQLServerAgent/Alerts/SQLServerAgent_Alerts_GetRecentTriggeredAlerts.sql)  
### Operators  
[`SQLServerAgent_Operators_CreateOperatorWithEmail.sql`](https://github.com/trstringer/SQLSalt/blob/master/SQLServerAgent/Operators/SQLServerAgent_Operators_CreateOperatorWithEmail.sql)  
## XE  
### Misc  
[`XE_Misc_ReadXELogFile.sql`](https://github.com/trstringer/SQLSalt/blob/master/XE/Misc/XE_Misc_ReadXELogFile.sql)  
### Performance  
[`XE_Performance_SlowSQLStmts.sql`](https://github.com/trstringer/SQLSalt/blob/master/XE/Performance/XE_Performance_SlowSQLStmts.sql)  
